(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-12e5"],{"E/wA":function(t,e,a){"use strict";a.r(e);var i=a("IhzE"),r=a("ptqd");for(var o in r)"default"!==o&&function(t){a.d(e,t,function(){return r[t]})}(o);var n=a("KHd+"),l=Object(n.a)(r.default,i.a,i.b,!1,null,null,null);l.options.__file="lists.vue",e.default=l.exports},FToP:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.index=function(t){return(0,i.default)({url:r.default.PAGES,method:"get",params:t})},e.store=function(t){return(0,i.default)({url:r.default.PAGES,method:"post",data:t})},e.destroy=function(t){return(0,i.default)({url:r.default.PAGES+"/"+t.id,method:"delete"})},e.update=function(t){return(0,i.default)({url:r.default.PAGES+"/"+t.id,method:"put",data:t})};var i=o(a("t3Un")),r=o(a("bs5h"));function o(t){return t&&t.__esModule?t:{default:t}}},IhzE:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"padding-right":"20px","padding-top":"10px",float:"right",display:"inline"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:t.handleCreate}})],1),t._v(" "),a("div",{staticClass:"app-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.id)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.display_name)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"url"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.name)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"排序"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.sort_order)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"created_at",label:"添加时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-time"}),t._v(" "),a("span",[t._v(t._s(e.row.created_at))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("p"),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{staticClass:"edit-rule-form",attrs:{title:"添加页面",visible:t.dialogCreateFormVisible},on:{"update:visible":function(e){t.dialogCreateFormVisible=e}}},[a("el-form",{ref:"createForm",attrs:{model:t.createForm,rules:t.rules}},[a("el-form-item",{attrs:{label:"页面名称","label-width":t.formLabelWidth,prop:"display_name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.createForm.display_name,callback:function(e){t.$set(t.createForm,"display_name",e)},expression:"createForm.display_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"页面uri","label-width":t.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.createForm.name,callback:function(e){t.$set(t.createForm,"name",e)},expression:"createForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"页面内容","label-width":t.formLabelWidth,prop:"content"}},[a("mavon-editor",{staticStyle:{height:"100%"},model:{value:t.createForm.content,callback:function(e){t.$set(t.createForm,"content",e)},expression:"createForm.content"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"显示顺序","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{label:"显示顺序"},model:{value:t.createForm.sort_order,callback:function(e){t.$set(t.createForm,"sort_order",e)},expression:"createForm.sort_order"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogCreateFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitCreateForm("createForm")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{staticClass:"edit-rule-form",attrs:{title:"修改页面",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,rules:t.rules}},[a("el-form-item",{attrs:{label:"页面名称","label-width":t.formLabelWidth,prop:"display_name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.editForm.display_name,callback:function(e){t.$set(t.editForm,"display_name",e)},expression:"editForm.display_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"页面uri","label-width":t.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"页面内容","label-width":t.formLabelWidth,prop:"content"}},[a("mavon-editor",{staticStyle:{height:"100%"},model:{value:t.editForm.content,callback:function(e){t.$set(t.editForm,"content",e)},expression:"editForm.content"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"显示顺序","label-width":t.formLabelWidth}},[a("el-input-number",{attrs:{label:"显示顺序"},model:{value:t.editForm.sort_order,callback:function(e){t.$set(t.editForm,"sort_order",e)},expression:"editForm.sort_order"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitEditForm("editForm")}}},[t._v("确 定")])],1)],1)],1)},r=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},X9Gm:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("FToP"),r=a("stgD");a("ZOF2"),e.default={components:{mavonEditor:r.mavonEditor},methods:{handleSizeChange:function(t){var e=this;this.listLoading=!0,(0,i.index)({limit:t,page:this.currentPage,keyword:this.keyword}).then(function(t){e.list=t.data.List,e.listLoading=!1,e.currentPage=t.data.PageNo,e.total=t.data.TotalCount,e.limit=parseInt(t.data.PageSize)})},handleCurrentChange:function(t){var e=this;this.listLoading=!0,(0,i.index)({page:t,limit:this.limit,keyword:this.keyword}).then(function(t){e.list=t.data.List,e.listLoading=!1,e.currentPage=t.data.PageNo,e.total=t.data.TotalCount,e.limit=parseInt(t.data.PageSize)})},handleSearch:function(){var t=this;this.listLoading=!0,(0,i.index)({keyword:this.keyword,limit:this.limit}).then(function(e){t.list=e.data.List,t.listLoading=!1,t.currentPage=e.data.PageNo,t.total=e.data.TotalCount,t.limit=parseInt(e.data.PageSize)})},handleCreate:function(){this.dialogCreateFormVisible=!0},handleEdit:function(t,e){this.dialogFormVisible=!0;var a=e;this.editForm.page_id=a.id,this.editForm.name=a.name,this.editForm.display_name=a.display_name,this.editForm.content=a.content,this.editForm.sort_order=parseInt(a.sort_order)},handleDelete:function(t,e){var a=this;this.$confirm("此操作将删除该页面, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(0,i.destroy)({id:e.id}).then(function(t){a.$message({type:"success",message:"删除成功!"}),a.fetchData()})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},fetchData:function(){var t=this;this.listLoading=!0,(0,i.index)({page:this.currentPage,limit:this.limit,keyword:this.keyword}).then(function(e){t.list=e.data.List,t.listLoading=!1,t.currentPage=e.data.PageNo,t.total=e.data.TotalCount,t.limit=parseInt(e.data.PageSize)})},submitCreateForm:function(t){var e=this;this.$refs[t].validate(function(a){if(!a)return e.dialogCreateFormVisible=!0,!1;var r={name:e.createForm.name,display_name:e.createForm.display_name,content:e.createForm.content,sort_order:e.createForm.sort_order};(0,i.store)(r).then(function(a){e.dialogCreateFormVisible=!1,e.$message({type:"success",message:"添加成功!"}),e.fetchData(),e.$refs[t].resetFields()})})},submitEditForm:function(t){var e=this;this.$refs[t].validate(function(a){if(!a)return e.dialogFormVisible=!0,!1;var r={id:e.editForm.page_id,name:e.editForm.name,display_name:e.editForm.display_name,content:e.editForm.content,sort_order:e.editForm.sort_order};(0,i.update)(r).then(function(a){e.dialogFormVisible=!1,e.$message({type:"success",message:"修改成功!"}),e.fetchData(),e.$refs[t].resetFields()})})}},data:function(){return{currentPage:1,total:0,limit:10,keyword:"",list:null,listLoading:!0,editListLoading:!0,dialogFormVisible:!1,dialogCreateFormVisible:!1,editForm:{page_id:0,name:"",display_name:"",content:"",sort_order:0},createForm:{name:"",display_name:"",content:"",sort_order:0},formLabelWidth:"120px",rules:{name:[{required:!0,message:"请输标题",trigger:"blur"}],display_name:[{required:!0,message:"请输描述",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]}}},created:function(){this.fetchData()}}},ptqd:function(t,e,a){"use strict";a.r(e);var i=a("X9Gm"),r=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e.default=r.a}}]);